# Role to manage flatpack packages
---
- name: gather data
  set_fact:
    data: "{{ hostvars['localhost'].profile_json['Flatpack_Remotes'] }}"

- name: displaying tasks from config
  debug:
    msg: "{{ item }}"
  with_items: "{{ data }}"

- name: Add the flatpak repository remotes
  community.general.flatpak_remote:
    name: "{{ item.Name }}"
    state: "{{ item.State }}"
    flatpakrepo_url: "{{ item.FlatpackRepo_URL }}"
    method: "{{ item.Method }}"
  with_items: "{{ data }}"